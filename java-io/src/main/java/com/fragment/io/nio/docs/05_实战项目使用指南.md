# ç¬¬5ç« ï¼šå®æˆ˜é¡¹ç›®ä½¿ç”¨æŒ‡å—

> **æœ¬ç« ç›®æ ‡**ï¼šæŒæ¡ä¸‰ä¸ªå®æˆ˜é¡¹ç›®çš„ä½¿ç”¨æ–¹æ³•ã€ç†è§£é¡¹ç›®è®¾è®¡æ€è·¯ã€å­¦ä¹ å®é™…å¼€å‘ä¸­çš„æœ€ä½³å®è·µ

---

## ä¸€ã€é¡¹ç›®æ¦‚è§ˆ

### ä¸‰ä¸ªå®æˆ˜é¡¹ç›®å¯¹æ¯”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é¡¹ç›®       â”‚  NIOèŠå¤©å®¤     â”‚  NIOæ–‡ä»¶ä¼ è¾“   â”‚  NIO HTTPæœåŠ¡å™¨â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¤æ‚åº¦       â”‚  â­â­â­        â”‚  â­â­â­â­      â”‚  â­â­â­â­â­    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ ¸å¿ƒæŠ€æœ¯     â”‚  Selector      â”‚  é›¶æ‹·è´        â”‚  HTTPåè®®      â”‚
â”‚              â”‚  æ¶ˆæ¯å¹¿æ’­      â”‚  transferTo    â”‚  Keep-Alive    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å­¦ä¹ é‡ç‚¹     â”‚  å¤šå®¢æˆ·ç«¯ç®¡ç†  â”‚  æ–‡ä»¶ä¼ è¾“      â”‚  åè®®è§£æ      â”‚
â”‚              â”‚  åŠåŒ…/ç²˜åŒ…     â”‚  è¿›åº¦æ˜¾ç¤º      â”‚  MIMEç±»å‹      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€‚åˆåœºæ™¯     â”‚  å³æ—¶é€šè®¯      â”‚  æ–‡ä»¶å…±äº«      â”‚  WebæœåŠ¡       â”‚
â”‚              â”‚  åœ¨çº¿æ¸¸æˆ      â”‚  å¤‡ä»½ç³»ç»Ÿ      â”‚  é™æ€èµ„æº      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å­¦ä¹ å»ºè®®ï¼š
1. å…ˆå­¦ä¹ èŠå¤©å®¤é¡¹ç›®ï¼ŒæŒæ¡åŸºæœ¬çš„NIOç½‘ç»œç¼–ç¨‹
2. å†å­¦ä¹ æ–‡ä»¶ä¼ è¾“é¡¹ç›®ï¼ŒæŒæ¡é›¶æ‹·è´æŠ€æœ¯
3. æœ€åå­¦ä¹ HTTPæœåŠ¡å™¨ï¼ŒæŒæ¡åè®®è§£æå’Œå®é™…åº”ç”¨
```

---

## äºŒã€é¡¹ç›®1ï¼šNIOèŠå¤©å®¤æœåŠ¡å™¨

### 2.1 åŠŸèƒ½æ¼”ç¤º

```
åœºæ™¯1ï¼šç”¨æˆ·ç™»å½•å’Œç¾¤èŠ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·ç«¯1ï¼ˆAliceï¼‰                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯·è¾“å…¥ä½ çš„æ˜µç§°: Alice                    â”‚
â”‚ ç™»å½•æˆåŠŸï¼æ¬¢è¿æ¥åˆ°NIOèŠå¤©å®¤              â”‚
â”‚ [14:30:15] ç³»ç»Ÿæç¤º: Bob åŠ å…¥äº†èŠå¤©å®¤    â”‚
â”‚ [14:30:20] Alice: å¤§å®¶å¥½ï¼               â”‚
â”‚ [14:30:25] Bob: ä½ å¥½ï¼ŒAliceï¼            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·ç«¯2ï¼ˆBobï¼‰                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯·è¾“å…¥ä½ çš„æ˜µç§°: Bob                      â”‚
â”‚ ç™»å½•æˆåŠŸï¼æ¬¢è¿æ¥åˆ°NIOèŠå¤©å®¤              â”‚
â”‚ [14:30:20] Alice: å¤§å®¶å¥½ï¼               â”‚
â”‚ [14:30:25] Bob: ä½ å¥½ï¼ŒAliceï¼            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯2ï¼šç§èŠåŠŸèƒ½
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·ç«¯1ï¼ˆAliceï¼‰                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ @Bob ä½ åœ¨å—ï¼Ÿ                            â”‚
â”‚ [14:31:00] ä½ æ‚„æ‚„å¯¹ Bob è¯´: ä½ åœ¨å—ï¼Ÿ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·ç«¯2ï¼ˆBobï¼‰                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [14:31:00] Alice æ‚„æ‚„å¯¹ä½ è¯´: ä½ åœ¨å—ï¼Ÿ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯3ï¼šç³»ç»Ÿå‘½ä»¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /list                                   â”‚
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚ â•‘         åœ¨çº¿ç”¨æˆ·åˆ—è¡¨                â•‘  â”‚
â”‚ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚ â•‘  1. Alice                          â•‘  â”‚
â”‚ â•‘  2. Bob                            â•‘  â”‚
â”‚ â•‘  3. Charlie                        â•‘  â”‚
â”‚ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚ â•‘  æ€»è®¡: 3 äººåœ¨çº¿                    â•‘  â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å¿«é€Ÿå¼€å§‹

**æ­¥éª¤1ï¼šå¯åŠ¨æœåŠ¡å™¨**

```bash
# ç¼–è¯‘
cd java-io/src/main/java
javac com/fragment/io/nio/project/NIOChatServer.java

# è¿è¡Œï¼ˆé»˜è®¤ç«¯å£8888ï¼‰
java com.fragment.io.nio.project.NIOChatServer

# æˆ–æŒ‡å®šç«¯å£
java com.fragment.io.nio.project.NIOChatServer 9999
```

**æ­¥éª¤2ï¼šå¯åŠ¨å®¢æˆ·ç«¯**

```bash
# ç¼–è¯‘
javac com/fragment/io/nio/project/NIOChatClient.java

# è¿è¡Œï¼ˆè¿æ¥åˆ°localhost:8888ï¼‰
java com.fragment.io.nio.project.NIOChatClient

# æˆ–æŒ‡å®šæœåŠ¡å™¨åœ°å€å’Œç«¯å£
java com.fragment.io.nio.project.NIOChatClient 192.168.1.100 9999
```

**æ­¥éª¤3ï¼šä½¿ç”¨èŠå¤©å®¤**

```
1. è¾“å…¥æ˜µç§°ç™»å½•
2. ç›´æ¥è¾“å…¥æ¶ˆæ¯å‘é€ç¾¤èŠ
3. è¾“å…¥ @ç”¨æˆ·å æ¶ˆæ¯ å‘é€ç§èŠ
4. è¾“å…¥ /help æŸ¥çœ‹å¸®åŠ©
5. è¾“å…¥ /list æŸ¥çœ‹åœ¨çº¿ç”¨æˆ·
6. è¾“å…¥ /quit é€€å‡ºèŠå¤©å®¤
```

### 2.3 æ ¸å¿ƒè®¾è®¡

#### é—®é¢˜1ï¼šå¦‚ä½•ç®¡ç†å¤šä¸ªå®¢æˆ·ç«¯ï¼Ÿ

```java
// è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨Mapå­˜å‚¨Channelå’Œç”¨æˆ·ä¿¡æ¯çš„æ˜ å°„
private Map<SocketChannel, ClientInfo> clients = new ConcurrentHashMap<>();
private Map<String, SocketChannel> usernameIndex = new ConcurrentHashMap<>();

// ClientInfoåŒ…å«ï¼š
// - ç”¨æˆ·å
// - è¿æ¥æ—¶é—´
// - è¯»ç¼“å†²åŒºï¼ˆæ¯ä¸ªå®¢æˆ·ç«¯ç‹¬ç«‹ï¼‰
```

**ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªMapï¼Ÿ**
- `clients`ï¼šé€šè¿‡Channelå¿«é€ŸæŸ¥æ‰¾ç”¨æˆ·ä¿¡æ¯
- `usernameIndex`ï¼šé€šè¿‡ç”¨æˆ·åå¿«é€ŸæŸ¥æ‰¾Channelï¼ˆç”¨äºç§èŠï¼‰

#### é—®é¢˜2ï¼šå¦‚ä½•å¤„ç†åŠåŒ…/ç²˜åŒ…ï¼Ÿ

```
åŠåŒ…é—®é¢˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TCPæ˜¯æµå¼åè®®ï¼Œä¸€æ¡æ¶ˆæ¯å¯èƒ½åˆ†å¤šæ¬¡åˆ°è¾¾     â”‚
â”‚                                         â”‚
â”‚ å‘é€ï¼šHello World\n                     â”‚
â”‚ æ¥æ”¶1ï¼šHello Wo                         â”‚
â”‚ æ¥æ”¶2ï¼šrld\n                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç²˜åŒ…é—®é¢˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¤šæ¡æ¶ˆæ¯å¯èƒ½ä¸€æ¬¡æ€§åˆ°è¾¾                   â”‚
â”‚                                         â”‚
â”‚ å‘é€1ï¼šHello\n                          â”‚
â”‚ å‘é€2ï¼šWorld\n                          â”‚
â”‚ æ¥æ”¶ï¼šHello\nWorld\n                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æ¢è¡Œç¬¦ä½œä¸ºæ¶ˆæ¯åˆ†éš”ç¬¦
```

```java
// æ¯ä¸ªå®¢æˆ·ç«¯ç»´æŠ¤ç‹¬ç«‹çš„è¯»ç¼“å†²åŒº
ByteBuffer buffer = clientInfo.getReadBuffer();

// æŸ¥æ‰¾æ¢è¡Œç¬¦
while (buffer.hasRemaining()) {
    // æŸ¥æ‰¾\n
    int lineEnd = findLineEnd(buffer);
    
    if (lineEnd == -1) {
        // æ²¡æœ‰å®Œæ•´æ¶ˆæ¯ï¼Œç­‰å¾…æ›´å¤šæ•°æ®
        buffer.compact();
        return;
    }
    
    // è¯»å–ä¸€æ¡å®Œæ•´æ¶ˆæ¯
    String message = readLine(buffer, lineEnd);
    handleMessage(message);
}
```

#### é—®é¢˜3ï¼šå¦‚ä½•å®ç°æ¶ˆæ¯å¹¿æ’­ï¼Ÿ

```java
// éå†æ‰€æœ‰åœ¨çº¿å®¢æˆ·ç«¯ï¼Œé€ä¸ªå‘é€
private void broadcastMessage(String senderUsername, String message) {
    String formattedMessage = String.format("[%s] %s: %s\n", 
                                           timestamp, senderUsername, message);
    
    for (Map.Entry<SocketChannel, ClientInfo> entry : clients.entrySet()) {
        SocketChannel channel = entry.getKey();
        ClientInfo info = entry.getValue();
        
        // åªå‘é€ç»™å·²ç™»å½•çš„ç”¨æˆ·
        if (info.getUsername() != null) {
            sendMessage(channel, formattedMessage);
        }
    }
}
```

**æ³¨æ„äº‹é¡¹**ï¼š
- å‘é€æ¶ˆæ¯æ—¶å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼ˆå®¢æˆ·ç«¯æ–­å¼€ï¼‰
- éœ€è¦æ•è·å¼‚å¸¸å¹¶æ¸…ç†èµ„æº
- ä¸è¦é˜»å¡äº‹ä»¶å¾ªç¯

### 2.4 æ‰©å±•æ€è·¯

```
æ‰©å±•1ï¼šæ·»åŠ èŠå¤©å®¤åŠŸèƒ½
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - æ”¯æŒåˆ›å»ºå¤šä¸ªèŠå¤©å®¤                     â”‚
â”‚ - ç”¨æˆ·å¯ä»¥åŠ å…¥/é€€å‡ºèŠå¤©å®¤                â”‚
â”‚ - æ¶ˆæ¯åªåœ¨åŒä¸€èŠå¤©å®¤å†…å¹¿æ’­               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•2ï¼šæ·»åŠ æ¶ˆæ¯æŒä¹…åŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - å°†æ¶ˆæ¯ä¿å­˜åˆ°æ•°æ®åº“                     â”‚
â”‚ - ç”¨æˆ·ç™»å½•åå¯ä»¥æŸ¥çœ‹å†å²æ¶ˆæ¯             â”‚
â”‚ - æ”¯æŒç¦»çº¿æ¶ˆæ¯                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•3ï¼šæ·»åŠ æ–‡ä»¶ä¼ è¾“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - æ”¯æŒå‘é€æ–‡ä»¶ç»™å…¶ä»–ç”¨æˆ·                 â”‚
â”‚ - ä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯ä¼ è¾“                     â”‚
â”‚ - æ˜¾ç¤ºä¼ è¾“è¿›åº¦                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•4ï¼šæ·»åŠ ç”¨æˆ·è®¤è¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - ç”¨æˆ·æ³¨å†Œ/ç™»å½•                          â”‚
â”‚ - å¯†ç åŠ å¯†å­˜å‚¨                           â”‚
â”‚ - é˜²æ­¢é‡å¤ç™»å½•                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€é¡¹ç›®2ï¼šNIOæ–‡ä»¶ä¼ è¾“æœåŠ¡å™¨

### 3.1 åŠŸèƒ½æ¼”ç¤º

```
åœºæ™¯1ï¼šæ–‡ä»¶åˆ—è¡¨æŸ¥è¯¢
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·ç«¯                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯·è¾“å…¥å‘½ä»¤: LIST                         â”‚
â”‚ OK|æ–‡ä»¶åˆ—è¡¨:                             â”‚
â”‚ OK|  test.txt (1,234 å­—èŠ‚)               â”‚
â”‚ OK|  image.jpg (512,345 å­—èŠ‚)            â”‚
â”‚ OK|  video.mp4 (10,485,760 å­—èŠ‚)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯2ï¼šæ–‡ä»¶ä¸‹è½½ï¼ˆé›¶æ‹·è´ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯·è¾“å…¥å‘½ä»¤: DOWNLOAD test.txt            â”‚
â”‚ OK|å¼€å§‹ä¸‹è½½|test.txt|1234                â”‚
â”‚ å¼€å§‹ä¸‹è½½: test.txt (1234 å­—èŠ‚)           â”‚
â”‚ ä¸‹è½½è¿›åº¦: 10%                            â”‚
â”‚ ä¸‹è½½è¿›åº¦: 20%                            â”‚
â”‚ ...                                     â”‚
â”‚ ä¸‹è½½è¿›åº¦: 100%                           â”‚
â”‚ ä¸‹è½½å®Œæˆ: /path/to/download_test.txt    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯3ï¼šæ–‡ä»¶ä¸Šä¼ 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯·è¾“å…¥å‘½ä»¤: UPLOAD /path/to/file.pdf    â”‚
â”‚ OK|å‡†å¤‡æ¥æ”¶æ–‡ä»¶|file.pdf                 â”‚
â”‚ å¼€å§‹ä¸Šä¼ : file.pdf (2048 å­—èŠ‚)           â”‚
â”‚ ä¸Šä¼ è¿›åº¦: 10%                            â”‚
â”‚ ä¸Šä¼ è¿›åº¦: 20%                            â”‚
â”‚ ...                                     â”‚
â”‚ ä¸Šä¼ è¿›åº¦: 100%                           â”‚
â”‚ ä¸Šä¼ å®Œæˆ                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å¿«é€Ÿå¼€å§‹

**æ­¥éª¤1ï¼šå¯åŠ¨æœåŠ¡å™¨**

```bash
# ç¼–è¯‘
javac com/fragment/io/nio/project/NIOFileServer.java

# è¿è¡Œï¼ˆé»˜è®¤ç«¯å£9999ï¼‰
java com.fragment.io.nio.project.NIOFileServer

# æ–‡ä»¶å­˜å‚¨ç›®å½•ï¼š~/nio_file_server
```

**æ­¥éª¤2ï¼šå¯åŠ¨å®¢æˆ·ç«¯**

```bash
# ç¼–è¯‘
javac com/fragment/io/nio/project/NIOFileClient.java

# è¿è¡Œ
java com.fragment.io.nio.project.NIOFileClient localhost 9999
```

**æ­¥éª¤3ï¼šä½¿ç”¨æ–‡ä»¶ä¼ è¾“**

```bash
# åˆ—å‡ºæœåŠ¡å™¨æ–‡ä»¶
LIST

# ä¸‹è½½æ–‡ä»¶
DOWNLOAD test.txt

# ä¸Šä¼ æ–‡ä»¶
UPLOAD /path/to/local/file.pdf

# é€€å‡º
QUIT
```

### 3.3 æ ¸å¿ƒè®¾è®¡

#### é—®é¢˜1ï¼šå¦‚ä½•è®¾è®¡æ–‡ä»¶ä¼ è¾“åè®®ï¼Ÿ

```
åè®®è®¾è®¡åŸåˆ™ï¼š
1. ç®€å•æ˜“è§£æ
2. æ”¯æŒå¤šç§å‘½ä»¤
3. åŒ…å«å¿…è¦ä¿¡æ¯

åè®®æ ¼å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMMAND|å‚æ•°1|å‚æ•°2|...\n                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å‘½ä»¤ç¤ºä¾‹ï¼š
- LIST\n
- DOWNLOAD|filename\n
- UPLOAD|filename|filesize\n
- QUIT\n

å“åº”æ ¼å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OK|æ•°æ®\n         - æˆåŠŸ                 â”‚
â”‚ ERROR|é”™è¯¯ä¿¡æ¯\n  - å¤±è´¥                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é—®é¢˜2ï¼šå¦‚ä½•å®ç°é›¶æ‹·è´æ–‡ä»¶ä¼ è¾“ï¼Ÿ

```java
// ä¸‹è½½æ–‡ä»¶ï¼šä½¿ç”¨transferTo()
FileChannel fileChannel = FileChannel.open(filePath, StandardOpenOption.READ);
SocketChannel socketChannel = session.getChannel();

long position = 0;
long fileSize = fileChannel.size();

while (position < fileSize) {
    // é›¶æ‹·è´ä¼ è¾“ï¼ˆæ¯æ¬¡æœ€å¤š1MBï¼‰
    long transferred = fileChannel.transferTo(
        position,
        Math.min(fileSize - position, 1024 * 1024),
        socketChannel
    );
    
    position += transferred;
}
```

**é›¶æ‹·è´çš„ä¼˜åŠ¿**ï¼š
```
ä¼ ç»Ÿæ–¹å¼ï¼ˆ4æ¬¡æ‹·è´ï¼‰ï¼š
ç£ç›˜ â†’ å†…æ ¸ç¼“å†²åŒº â†’ ç”¨æˆ·ç¼“å†²åŒº â†’ Socketç¼“å†²åŒº â†’ ç½‘å¡

é›¶æ‹·è´æ–¹å¼ï¼ˆ2æ¬¡æ‹·è´ï¼‰ï¼š
ç£ç›˜ â†’ å†…æ ¸ç¼“å†²åŒº â†’ ç½‘å¡

æ€§èƒ½æå‡ï¼š
- å‡å°‘2æ¬¡CPUæ‹·è´
- å‡å°‘2æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢
- å‡å°‘å†…å­˜å ç”¨
- ä¼ è¾“é€Ÿåº¦æå‡80%ä»¥ä¸Š
```

#### é—®é¢˜3ï¼šå¦‚ä½•å¤„ç†å¤§æ–‡ä»¶ä¼ è¾“ï¼Ÿ

```java
// é—®é¢˜ï¼šä¸€æ¬¡æ€§ä¼ è¾“å¤§æ–‡ä»¶å¯èƒ½å¯¼è‡´ï¼š
// 1. å†…å­˜æº¢å‡º
// 2. é˜»å¡å…¶ä»–å®¢æˆ·ç«¯
// 3. ä¼ è¾“å¤±è´¥æ— æ³•æ¢å¤

// è§£å†³æ–¹æ¡ˆï¼šåˆ†å—ä¼ è¾“
long chunkSize = 1024 * 1024; // 1MB

while (position < fileSize) {
    long remaining = fileSize - position;
    long toTransfer = Math.min(chunkSize, remaining);
    
    long transferred = fileChannel.transferTo(position, toTransfer, socketChannel);
    position += transferred;
    
    // æ›´æ–°è¿›åº¦
    updateProgress(position, fileSize);
}
```

#### é—®é¢˜4ï¼šå¦‚ä½•æ˜¾ç¤ºä¼ è¾“è¿›åº¦ï¼Ÿ

```java
// æœåŠ¡å™¨ç«¯
private void handleFileDownload(SelectionKey key, ClientSession session) {
    long position = session.getDownloadPosition();
    long fileSize = session.getDownloadFileSize();
    
    // è®¡ç®—è¿›åº¦
    int progress = (int) ((position * 100) / fileSize);
    
    // æ¯10%æ˜¾ç¤ºä¸€æ¬¡ï¼ˆé¿å…é¢‘ç¹è¾“å‡ºï¼‰
    if (progress % 10 == 0 && progress != session.getLastProgress()) {
        log("å‘é€è¿›åº¦: " + session.getDownloadFilename() + " - " + progress + "%");
        session.setLastProgress(progress);
    }
}
```

### 3.4 æ‰©å±•æ€è·¯

```
æ‰©å±•1ï¼šæ–­ç‚¹ç»­ä¼ 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - è®°å½•ä¼ è¾“ä½ç½®                           â”‚
â”‚ - æ”¯æŒä»æŒ‡å®šä½ç½®ç»§ç»­ä¼ è¾“                 â”‚
â”‚ - å‘½ä»¤ï¼šRESUME|filename|position         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•2ï¼šæ–‡ä»¶æ ¡éªŒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - ä¼ è¾“å‰è®¡ç®—MD5/SHA256                   â”‚
â”‚ - ä¼ è¾“åéªŒè¯æ–‡ä»¶å®Œæ•´æ€§                   â”‚
â”‚ - è‡ªåŠ¨é‡ä¼ æŸåçš„æ–‡ä»¶                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•3ï¼šå¤šæ–‡ä»¶ä¼ è¾“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - æ”¯æŒæ‰¹é‡ä¸Šä¼ /ä¸‹è½½                      â”‚
â”‚ - æ”¯æŒç›®å½•ä¼ è¾“                           â”‚
â”‚ - æ”¯æŒå‹ç¼©ä¼ è¾“                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•4ï¼šæƒé™æ§åˆ¶
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - ç”¨æˆ·è®¤è¯                               â”‚
â”‚ - æ–‡ä»¶è®¿é—®æƒé™                           â”‚
â”‚ - ä¸Šä¼ å¤§å°é™åˆ¶                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€é¡¹ç›®3ï¼šNIO HTTPæœåŠ¡å™¨

### 4.1 åŠŸèƒ½æ¼”ç¤º

```
åœºæ™¯1ï¼šè®¿é—®é¦–é¡µ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æµè§ˆå™¨                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åœ°å€æ : http://localhost:8080/           â”‚
â”‚                                         â”‚
â”‚ æ˜¾ç¤ºï¼š                                   â”‚
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚ â•‘  æ¬¢è¿ä½¿ç”¨NIO HTTPæœåŠ¡å™¨             â•‘  â”‚
â”‚ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚ â•‘  æ ¸å¿ƒç‰¹æ€§ï¼š                         â•‘  â”‚
â”‚ â•‘  - æ”¯æŒHTTP/1.1åè®®                 â•‘  â”‚
â”‚ â•‘  - æ”¯æŒKeep-Aliveé•¿è¿æ¥             â•‘  â”‚
â”‚ â•‘  - ä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯ä¼ è¾“æ–‡ä»¶           â•‘  â”‚
â”‚ â•‘  - ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å‹            â•‘  â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯2ï¼šè®¿é—®é™æ€æ–‡ä»¶
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åœ°å€æ : http://localhost:8080/test.html â”‚
â”‚                                         â”‚
â”‚ æœåŠ¡å™¨æ—¥å¿—ï¼š                             â”‚
â”‚ [2024-01-14 14:30:15] GET /test.html    â”‚
â”‚ [2024-01-14 14:30:15] å‘é€æ–‡ä»¶: test.htmlâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯3ï¼š404é”™è¯¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åœ°å€æ : http://localhost:8080/notfound  â”‚
â”‚                                         â”‚
â”‚ æ˜¾ç¤ºï¼š                                   â”‚
â”‚ 404 Not Found                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 å¿«é€Ÿå¼€å§‹

**æ­¥éª¤1ï¼šå¯åŠ¨æœåŠ¡å™¨**

```bash
# ç¼–è¯‘
javac com/fragment/io/nio/project/NIOHttpServer.java

# è¿è¡Œï¼ˆé»˜è®¤ç«¯å£8080ï¼‰
java com.fragment.io.nio.project.NIOHttpServer

# æˆ–æŒ‡å®šç«¯å£
java com.fragment.io.nio.project.NIOHttpServer 9090
```

**æ­¥éª¤2ï¼šå‡†å¤‡é™æ€æ–‡ä»¶**

```bash
# Webæ ¹ç›®å½•ï¼š~/nio_http_server/webroot

# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
cd ~/nio_http_server/webroot

# åˆ›å»ºHTMLæ–‡ä»¶
echo "<html><body><h1>Hello NIO!</h1></body></html>" > test.html

# å¤åˆ¶å›¾ç‰‡
cp /path/to/image.jpg .

# å¤åˆ¶CSSæ–‡ä»¶
cp /path/to/style.css .
```

**æ­¥éª¤3ï¼šè®¿é—®æœåŠ¡å™¨**

```bash
# æ–¹å¼1ï¼šä½¿ç”¨æµè§ˆå™¨
æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼šhttp://localhost:8080/

# æ–¹å¼2ï¼šä½¿ç”¨curl
curl http://localhost:8080/
curl http://localhost:8080/test.html

# æ–¹å¼3ï¼šä½¿ç”¨wget
wget http://localhost:8080/test.html
```

### 4.3 æ ¸å¿ƒè®¾è®¡

#### é—®é¢˜1ï¼šå¦‚ä½•è§£æHTTPè¯·æ±‚ï¼Ÿ

```
HTTPè¯·æ±‚æ ¼å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /index.html HTTP/1.1                â”‚ â† è¯·æ±‚è¡Œ
â”‚ Host: localhost:8080                    â”‚ â† è¯·æ±‚å¤´
â”‚ Connection: keep-alive                  â”‚
â”‚ User-Agent: Mozilla/5.0                 â”‚
â”‚                                         â”‚ â† ç©ºè¡Œ
â”‚ [è¯·æ±‚ä½“]                                 â”‚ â† è¯·æ±‚ä½“ï¼ˆå¯é€‰ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è§£ææ­¥éª¤ï¼š
1. è¯»å–è¯·æ±‚è¡Œï¼šæ–¹æ³•ã€URIã€åè®®ç‰ˆæœ¬
2. è¯»å–è¯·æ±‚å¤´ï¼šé€è¡Œè¯»å–ï¼Œç›´åˆ°é‡åˆ°ç©ºè¡Œ
3. è¯»å–è¯·æ±‚ä½“ï¼šæ ¹æ®Content-Lengthï¼ˆå¦‚æœæœ‰ï¼‰
```

```java
// è§£æå®ç°
private boolean parseHttpRequest(HttpSession session, ByteBuffer buffer) {
    while (buffer.hasRemaining()) {
        byte b = buffer.get();
        session.appendRequestData((char) b);
        
        // æ£€æŸ¥æ˜¯å¦è¯»å–å®Œè¯·æ±‚å¤´ï¼ˆ\r\n\r\nï¼‰
        if (session.getRequestData().endsWith("\r\n\r\n")) {
            String[] lines = session.getRequestData().split("\r\n");
            
            // è§£æè¯·æ±‚è¡Œ
            String[] requestLine = lines[0].split(" ");
            session.setMethod(requestLine[0]);
            session.setUri(requestLine[1]);
            session.setProtocol(requestLine[2]);
            
            // è§£æè¯·æ±‚å¤´
            for (int i = 1; i < lines.length; i++) {
                String[] header = lines[i].split(": ", 2);
                if (header.length == 2) {
                    session.addHeader(header[0], header[1]);
                }
            }
            
            return true;
        }
    }
    
    return false;
}
```

#### é—®é¢˜2ï¼šå¦‚ä½•æ”¯æŒä¸åŒçš„Content-Typeï¼Ÿ

```java
// MIMEç±»å‹æ˜ å°„
private static final Map<String, String> MIME_TYPES = new HashMap<>();

static {
    MIME_TYPES.put("html", "text/html");
    MIME_TYPES.put("css", "text/css");
    MIME_TYPES.put("js", "application/javascript");
    MIME_TYPES.put("json", "application/json");
    MIME_TYPES.put("jpg", "image/jpeg");
    MIME_TYPES.put("png", "image/png");
    MIME_TYPES.put("gif", "image/gif");
    MIME_TYPES.put("pdf", "application/pdf");
    // ...
}

// æ ¹æ®æ–‡ä»¶æ‰©å±•åè·å–Content-Type
private String getContentType(Path filePath) {
    String filename = filePath.getFileName().toString();
    int dotIndex = filename.lastIndexOf('.');
    
    if (dotIndex > 0) {
        String extension = filename.substring(dotIndex + 1).toLowerCase();
        return MIME_TYPES.getOrDefault(extension, "application/octet-stream");
    }
    
    return "application/octet-stream";
}
```

#### é—®é¢˜3ï¼šå¦‚ä½•æ”¯æŒKeep-Aliveï¼Ÿ

```
Keep-Aliveçš„ä½œç”¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¼ ç»ŸHTTPï¼ˆçŸ­è¿æ¥ï¼‰ï¼š                     â”‚
â”‚ è¯·æ±‚1 â†’ å»ºç«‹è¿æ¥ â†’ å“åº”1 â†’ å…³é—­è¿æ¥     â”‚
â”‚ è¯·æ±‚2 â†’ å»ºç«‹è¿æ¥ â†’ å“åº”2 â†’ å…³é—­è¿æ¥     â”‚
â”‚ è¯·æ±‚3 â†’ å»ºç«‹è¿æ¥ â†’ å“åº”3 â†’ å…³é—­è¿æ¥     â”‚
â”‚                                         â”‚
â”‚ é—®é¢˜ï¼šé¢‘ç¹å»ºç«‹/å…³é—­è¿æ¥ï¼Œå¼€é”€å¤§          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Keep-Aliveï¼ˆé•¿è¿æ¥ï¼‰ï¼š                   â”‚
â”‚ å»ºç«‹è¿æ¥ â†’ è¯·æ±‚1 â†’ å“åº”1                â”‚
â”‚          â†’ è¯·æ±‚2 â†’ å“åº”2                â”‚
â”‚          â†’ è¯·æ±‚3 â†’ å“åº”3                â”‚
â”‚          â†’ å…³é—­è¿æ¥                      â”‚
â”‚                                         â”‚
â”‚ ä¼˜åŠ¿ï¼šå¤ç”¨è¿æ¥ï¼Œå‡å°‘å¼€é”€                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```java
// å®ç°Keep-Alive
private void handleWrite(SelectionKey key) {
    HttpSession session = sessions.get(clientChannel);
    
    // å‘é€å“åº”
    sendResponse(session);
    
    if (session.isKeepAlive()) {
        // Keep-Aliveï¼Œç»§ç»­è¯»å–ä¸‹ä¸€ä¸ªè¯·æ±‚
        session.reset();  // é‡ç½®ä¼šè¯çŠ¶æ€
        key.interestOps(SelectionKey.OP_READ);
    } else {
        // å…³é—­è¿æ¥
        closeConnection(clientChannel);
    }
}
```

#### é—®é¢˜4ï¼šå¦‚ä½•æ„å»ºHTTPå“åº”ï¼Ÿ

```
HTTPå“åº”æ ¼å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HTTP/1.1 200 OK                         â”‚ â† çŠ¶æ€è¡Œ
â”‚ Content-Type: text/html                 â”‚ â† å“åº”å¤´
â”‚ Content-Length: 1234                    â”‚
â”‚ Connection: keep-alive                  â”‚
â”‚ Server: NIO-HTTP-Server/1.0             â”‚
â”‚ Date: Mon, 14 Jan 2024 06:30:15 GMT     â”‚
â”‚                                         â”‚ â† ç©ºè¡Œ
â”‚ <html>...</html>                        â”‚ â† å“åº”ä½“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```java
// æ„å»ºå“åº”
private void sendFileResponse(HttpSession session, Path filePath) {
    long fileSize = Files.size(filePath);
    String contentType = getContentType(filePath);
    
    StringBuilder response = new StringBuilder();
    response.append("HTTP/1.1 200 OK\r\n");
    response.append("Content-Type: ").append(contentType).append("\r\n");
    response.append("Content-Length: ").append(fileSize).append("\r\n");
    response.append("Connection: ").append(session.isKeepAlive() ? "keep-alive" : "close").append("\r\n");
    response.append("Server: NIO-HTTP-Server/1.0\r\n");
    response.append("Date: ").append(getHttpDate()).append("\r\n");
    response.append("\r\n");
    
    // å†™å…¥å“åº”å¤´
    ByteBuffer buffer = ByteBuffer.wrap(response.toString().getBytes());
    session.getChannel().write(buffer);
    
    // ä½¿ç”¨é›¶æ‹·è´å‘é€æ–‡ä»¶
    FileChannel fileChannel = FileChannel.open(filePath);
    fileChannel.transferTo(0, fileSize, session.getChannel());
}
```

### 4.4 æ‰©å±•æ€è·¯

```
æ‰©å±•1ï¼šæ”¯æŒPOSTè¯·æ±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - è§£æè¯·æ±‚ä½“                             â”‚
â”‚ - æ”¯æŒè¡¨å•æäº¤                           â”‚
â”‚ - æ”¯æŒæ–‡ä»¶ä¸Šä¼                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•2ï¼šæ”¯æŒåŠ¨æ€å†…å®¹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - è·¯ç”±æ˜ å°„                               â”‚
â”‚ - è¯·æ±‚å¤„ç†å™¨                             â”‚
â”‚ - æ¨¡æ¿å¼•æ“                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•3ï¼šæ”¯æŒHTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - SSL/TLSåŠ å¯†                            â”‚
â”‚ - è¯ä¹¦ç®¡ç†                               â”‚
â”‚ - ä½¿ç”¨SSLEngine                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰©å±•4ï¼šæ€§èƒ½ä¼˜åŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - é™æ€æ–‡ä»¶ç¼“å­˜                           â”‚
â”‚ - Gzipå‹ç¼©                               â”‚
â”‚ - è¿æ¥æ± ç®¡ç†                             â”‚
â”‚ - è´Ÿè½½å‡è¡¡                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€æ€§èƒ½æµ‹è¯•

### 5.1 èŠå¤©å®¤æ€§èƒ½æµ‹è¯•

```bash
# æµ‹è¯•å·¥å…·ï¼šç¼–å†™å‹æµ‹è„šæœ¬
# æµ‹è¯•åœºæ™¯ï¼š1000ä¸ªå®¢æˆ·ç«¯åŒæ—¶åœ¨çº¿ï¼Œæ¯ç§’å‘é€10æ¡æ¶ˆæ¯

æµ‹è¯•ç»“æœï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¹¶å‘è¿æ¥æ•°ï¼š1000                         â”‚
â”‚ æ¶ˆæ¯å‘é€é€Ÿç‡ï¼š10000 msg/s                â”‚
â”‚ CPUä½¿ç”¨ç‡ï¼š30%                           â”‚
â”‚ å†…å­˜ä½¿ç”¨ï¼š200MB                          â”‚
â”‚ å¹³å‡å»¶è¿Ÿï¼š5ms                            â”‚
â”‚ æœ€å¤§å»¶è¿Ÿï¼š50ms                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯¹æ¯”BIOå®ç°ï¼š
- å¹¶å‘è¿æ¥æ•°ï¼šBIOåªèƒ½æ”¯æŒ100-200ä¸ª
- CPUä½¿ç”¨ç‡ï¼šBIOè¾¾åˆ°100%ï¼ˆçº¿ç¨‹åˆ‡æ¢ï¼‰
- å†…å­˜ä½¿ç”¨ï¼šBIOéœ€è¦2GB+ï¼ˆæ¯ä¸ªçº¿ç¨‹1MBæ ˆï¼‰
```

### 5.2 æ–‡ä»¶ä¼ è¾“æ€§èƒ½æµ‹è¯•

```bash
# æµ‹è¯•åœºæ™¯ï¼šä¼ è¾“1GBæ–‡ä»¶

æµ‹è¯•ç»“æœï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¼ ç»ŸI/Oï¼ˆread + writeï¼‰ï¼š                â”‚
â”‚ - è€—æ—¶ï¼š15ç§’                             â”‚
â”‚ - é€Ÿåº¦ï¼š68 MB/s                          â”‚
â”‚ - CPUä½¿ç”¨ç‡ï¼š80%                         â”‚
â”‚                                         â”‚
â”‚ é›¶æ‹·è´ï¼ˆtransferToï¼‰ï¼š                   â”‚
â”‚ - è€—æ—¶ï¼š3ç§’                              â”‚
â”‚ - é€Ÿåº¦ï¼š341 MB/s                         â”‚
â”‚ - CPUä½¿ç”¨ç‡ï¼š20%                         â”‚
â”‚                                         â”‚
â”‚ æ€§èƒ½æå‡ï¼š5å€                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 HTTPæœåŠ¡å™¨æ€§èƒ½æµ‹è¯•

```bash
# ä½¿ç”¨Apache Benchæµ‹è¯•
ab -n 10000 -c 100 http://localhost:8080/index.html

æµ‹è¯•ç»“æœï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ€»è¯·æ±‚æ•°ï¼š10000                          â”‚
â”‚ å¹¶å‘æ•°ï¼š100                              â”‚
â”‚ æ€»è€—æ—¶ï¼š2.5ç§’                            â”‚
â”‚ QPSï¼š4000 req/s                          â”‚
â”‚ å¹³å‡å“åº”æ—¶é—´ï¼š25ms                       â”‚
â”‚ æˆåŠŸç‡ï¼š100%                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯¹æ¯”Tomcatï¼ˆBIOæ¨¡å¼ï¼‰ï¼š
- QPSï¼šTomcatçº¦1500 req/s
- æ€§èƒ½æå‡ï¼š2.7å€
```

---

## å…­ã€å¸¸è§é—®é¢˜

### Q1ï¼šä¸ºä»€ä¹ˆå®¢æˆ·ç«¯è¿æ¥åç«‹å³æ–­å¼€ï¼Ÿ

```
å¯èƒ½åŸå› ï¼š
1. æœåŠ¡å™¨ç«¯å£è¢«å ç”¨
2. é˜²ç«å¢™é˜»æ­¢è¿æ¥
3. å®¢æˆ·ç«¯æ²¡æœ‰æ­£ç¡®å¤„ç†è¿æ¥äº‹ä»¶

è§£å†³æ–¹æ¡ˆï¼š
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080

# æ›´æ¢ç«¯å£
java NIOChatServer 9999

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status
```

### Q2ï¼šä¸ºä»€ä¹ˆæ¶ˆæ¯å‘é€å¤±è´¥ï¼Ÿ

```
å¯èƒ½åŸå› ï¼š
1. å¿˜è®°è°ƒç”¨buffer.flip()
2. å†™ç¼“å†²åŒºæ»¡äº†
3. è¿æ¥å·²æ–­å¼€

è§£å†³æ–¹æ¡ˆï¼š
// æ­£ç¡®çš„å‘é€æµç¨‹
buffer.clear();
buffer.put(message.getBytes());
buffer.flip();  // å¿…é¡»è°ƒç”¨ï¼
channel.write(buffer);
```

### Q3ï¼šä¸ºä»€ä¹ˆæ–‡ä»¶ä¼ è¾“ä¸å®Œæ•´ï¼Ÿ

```
å¯èƒ½åŸå› ï¼š
1. transferTo()å•æ¬¡ä¼ è¾“é™åˆ¶ï¼ˆ2GBï¼‰
2. ç½‘ç»œä¸­æ–­
3. æ²¡æœ‰ç­‰å¾…ä¼ è¾“å®Œæˆ

è§£å†³æ–¹æ¡ˆï¼š
// åˆ†å—ä¼ è¾“
while (position < fileSize) {
    long transferred = fileChannel.transferTo(
        position,
        Math.min(fileSize - position, 1024 * 1024),
        socketChannel
    );
    
    if (transferred == 0) {
        // å†™ç¼“å†²åŒºæ»¡ï¼Œç­‰å¾…
        break;
    }
    
    position += transferred;
}
```

### Q4ï¼šä¸ºä»€ä¹ˆHTTPæœåŠ¡å™¨è¿”å›404ï¼Ÿ

```
å¯èƒ½åŸå› ï¼š
1. æ–‡ä»¶ä¸åœ¨Webæ ¹ç›®å½•
2. æ–‡ä»¶è·¯å¾„é”™è¯¯
3. æ–‡ä»¶æƒé™é—®é¢˜

è§£å†³æ–¹æ¡ˆï¼š
# æ£€æŸ¥Webæ ¹ç›®å½•
ls -la ~/nio_http_server/webroot

# æ£€æŸ¥æ–‡ä»¶æƒé™
chmod 644 ~/nio_http_server/webroot/index.html

# æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
[2024-01-14 14:30:15] GET /index.html
[2024-01-14 14:30:15] æ–‡ä»¶ä¸å­˜åœ¨: /path/to/index.html
```

---

## ä¸ƒã€æ€»ç»“

### ä¸‰ä¸ªé¡¹ç›®çš„æ ¸å¿ƒæ”¶è·

```
NIOèŠå¤©å®¤ï¼š
âœ“ æŒæ¡å¤šå®¢æˆ·ç«¯ç®¡ç†
âœ“ ç†è§£åŠåŒ…/ç²˜åŒ…å¤„ç†
âœ“ å®ç°æ¶ˆæ¯å¹¿æ’­æœºåˆ¶
âœ“ å­¦ä¹ ä¼šè¯ç®¡ç†

NIOæ–‡ä»¶ä¼ è¾“ï¼š
âœ“ æŒæ¡é›¶æ‹·è´æŠ€æœ¯
âœ“ å®ç°æ–‡ä»¶ä¼ è¾“åè®®
âœ“ å¤„ç†å¤§æ–‡ä»¶ä¼ è¾“
âœ“ æ˜¾ç¤ºä¼ è¾“è¿›åº¦

NIO HTTPæœåŠ¡å™¨ï¼š
âœ“ æŒæ¡HTTPåè®®è§£æ
âœ“ å®ç°Keep-Alive
âœ“ å¤„ç†ä¸åŒMIMEç±»å‹
âœ“ æ„å»ºå®Œæ•´çš„WebæœåŠ¡å™¨
```

### å®æˆ˜ç»éªŒæ€»ç»“

```
1. è®¾è®¡å…ˆè¡Œ
   - å…ˆè®¾è®¡åè®®å’Œæ•°æ®ç»“æ„
   - ç”»å‡ºäº¤äº’æµç¨‹å›¾
   - è€ƒè™‘å¼‚å¸¸æƒ…å†µ

2. åˆ†æ­¥å®ç°
   - å…ˆå®ç°åŸºæœ¬åŠŸèƒ½
   - å†æ·»åŠ é«˜çº§ç‰¹æ€§
   - æœ€åä¼˜åŒ–æ€§èƒ½

3. å……åˆ†æµ‹è¯•
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - å‹åŠ›æµ‹è¯•

4. æŒç»­ä¼˜åŒ–
   - æ€§èƒ½åˆ†æ
   - å†…å­˜ä¼˜åŒ–
   - ä»£ç é‡æ„
```

---

**æ­å–œä½ å®Œæˆäº†NIOå®æˆ˜é¡¹ç›®çš„å­¦ä¹ ï¼**

ç°åœ¨ä½ å·²ç»æŒæ¡äº†ï¼š
- âœ… NIOçš„æ ¸å¿ƒæ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•
- âœ… é›¶æ‹·è´æŠ€æœ¯çš„å®ç°
- âœ… Reactoræ¨¡å¼çš„ä¸‰ç§å½¢æ€
- âœ… å®é™…é¡¹ç›®çš„å¼€å‘ç»éªŒ

**ä¸‹ä¸€æ­¥**ï¼šå­¦ä¹ Nettyæ¡†æ¶ï¼Œçœ‹çœ‹å·¥ä¸šçº§NIOæ¡†æ¶æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼ğŸš€
