# 01 注解基础与元注解

本目录用于系统演示注解（Annotation）的使用与原理，重点是与反射的关系。对应包：`com.fragment.core.annotations`

## 核心概念
- **注解是什么**：为代码元素（类/方法/字段/参数/类型使用等）添加结构化元数据。
- **生命周期**：由 `@Retention` 指定。
  - `SOURCE`：只在源码中存在，编译后丢弃。
  - `CLASS`：编译进 class 文件，运行时不可见（默认）。
  - `RUNTIME`：运行时可见，能通过反射读取（本文示例主要使用）。
- **作用目标**：由 `@Target` 指定，如 `TYPE`、`METHOD`、`FIELD`、`PARAMETER`、`TYPE_USE` 等。

## 元注解一览
- **`@Retention`**：指定保留策略：`SOURCE`/`CLASS`/`RUNTIME`。
- **`@Target`**：指定可标注的代码元素。
- **`@Documented`**：生成 Javadoc 时包含该注解。
- **`@Inherited`**：类级别注解可被子类继承（仅限 `TYPE`）。
- **`@Repeatable`**：支持可重复注解，对应容器注解。

## 本示例中定义的注解
- `@Role`：类/方法级别，`@Inherited`，值为角色标识，`RUNTIME`。
- `@LogExecutionTime`：方法级别，`RUNTIME`，用于演示 AOP 风格的耗时日志。
- `@Min`：字段/参数级别，`RUNTIME`，用于校验最小值（示例中只读取元数据）。
- `@RepeatableTag` + `@RepeatableTags`：可重复注解示例。
- `@TypeUseAnno`：`TYPE_USE` 示例，可标注在泛型类型参数等位置。

## 示例代码地图（关键文件）
- 注解定义：
  - `annotations/Role.java`
  - `annotations/LogExecutionTime.java`
  - `annotations/Min.java`
  - `annotations/RepeatableTag.java`, `annotations/RepeatableTags.java`
  - `annotations/TypeUseAnno.java`
- 使用与演示：
  - `annotations/AnnotatedUser.java`（类/字段/参数/TYPE_USE/可重复注解）
  - `annotations/ExampleService.java`, `annotations/ExampleServiceImpl.java`
  - `annotations/ProxyFactory.java`（基于 `Proxy` 的动态代理切面）
  - `annotations/AnnotationInspector.java`（反射读取）
  - `annotations/AnnotationDemoMain.java`（统一入口）

## 要点
- 想要在运行时读取注解，必须使用 `@Retention(RetentionPolicy.RUNTIME)`。
- 类型使用注解需配合 `java.lang.reflect.AnnotatedType` 家族 API 获取。
- 可重复注解需要定义容器注解，并用 `@Repeatable(Container.class)` 标注。
