# å†…å­˜æ³„æ¼æ’æŸ¥

## ğŸ“š æ¦‚è¿°

å†…å­˜æ³„æ¼æ˜¯Javaåº”ç”¨ä¸­æœ€éšè”½ã€æœ€éš¾æ’æŸ¥çš„é—®é¢˜ä¹‹ä¸€ã€‚è™½ç„¶Javaæœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä½†ä¸å½“çš„ç¼–ç ä»ç„¶ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æœ¬æ–‡ä»æ¶æ„å¸ˆè§†è§’æ·±å…¥è®²è§£å†…å­˜æ³„æ¼çš„åŸç†ã€æ’æŸ¥æ–¹æ³•å’Œè§£å†³æ–¹æ¡ˆã€‚

## ğŸ¯ æ ¸å¿ƒé—®é¢˜

- â“ ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼ŸJavaä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰å†…å­˜æ³„æ¼ï¼Ÿ
- â“ å†…å­˜æ³„æ¼çš„å¸¸è§åŸå› æœ‰å“ªäº›ï¼Ÿ
- â“ å¦‚ä½•åˆ¤æ–­æ˜¯å¦å‘ç”Ÿäº†å†…å­˜æ³„æ¼ï¼Ÿ
- â“ å¦‚ä½•å®šä½å†…å­˜æ³„æ¼çš„ä»£ç ï¼Ÿ
- â“ å¦‚ä½•é¢„é˜²å†…å­˜æ³„æ¼ï¼Ÿ
- â“ å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

---

## ä¸€ã€ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼

### 1.1 å†…å­˜æ³„æ¼çš„å®šä¹‰

```
å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰ï¼š
- å¯¹è±¡ä¸å†è¢«ä½¿ç”¨
- ä½†ä»ç„¶è¢«å¼•ç”¨
- æ— æ³•è¢«GCå›æ”¶
- å¯¼è‡´å†…å­˜æŒç»­å¢é•¿
```

### 1.2 ä¸ºä»€ä¹ˆJavaä¼šæœ‰å†…å­˜æ³„æ¼

```
é—®é¢˜ï¼šJavaä¸æ˜¯æœ‰GCå—ï¼Ÿ

è§£ç­”ï¼š
GCåªèƒ½å›æ”¶"ä¸å¯è¾¾"çš„å¯¹è±¡
å¦‚æœå¯¹è±¡ä»ç„¶å¯è¾¾ï¼ˆæœ‰å¼•ç”¨ï¼‰ï¼ŒGCæ— æ³•å›æ”¶

ç¤ºä¾‹ï¼š
é™æ€é›†åˆæŒæœ‰å¯¹è±¡
    â†“
å¯¹è±¡å¯è¾¾ï¼ˆæœ‰å¼•ç”¨ï¼‰
    â†“
GCæ— æ³•å›æ”¶
    â†“
å†…å­˜æ³„æ¼
```

### 1.3 å†…å­˜æ³„æ¼ vs å†…å­˜æº¢å‡º

| å¯¹æ¯”é¡¹ | å†…å­˜æ³„æ¼ | å†…å­˜æº¢å‡º |
|-------|---------|---------|
| **å®šä¹‰** | å¯¹è±¡æ— æ³•è¢«å›æ”¶ | å†…å­˜ä¸è¶³ |
| **åŸå› ** | ä¸å½“çš„å¼•ç”¨ | å†…å­˜çœŸçš„ä¸å¤Ÿ |
| **è¡¨ç°** | å†…å­˜æŒç»­å¢é•¿ | ç«‹å³OOM |
| **GCè¡Œä¸º** | GCæ— æ•ˆ | GCåä»ä¸è¶³ |
| **è§£å†³** | ä¿®å¤ä»£ç  | å¢åŠ å†…å­˜ |

### 1.4 å†…å­˜æ³„æ¼çš„å±å®³

```
å±å®³1ï¼šå†…å­˜æŒç»­å¢é•¿
- å¯ç”¨å†…å­˜è¶Šæ¥è¶Šå°‘
- æœ€ç»ˆå¯¼è‡´OOM

å±å®³2ï¼šé¢‘ç¹Full GC
- è€å¹´ä»£æŒç»­å¢é•¿
- è§¦å‘é¢‘ç¹Full GC
- åº”ç”¨å“åº”å˜æ…¢

å±å®³3ï¼šç³»ç»Ÿä¸ç¨³å®š
- åº”ç”¨å´©æºƒ
- æœåŠ¡ä¸å¯ç”¨
- å½±å“ç”¨æˆ·ä½“éªŒ

å±å®³4ï¼šéš¾ä»¥æ’æŸ¥
- é—®é¢˜éšè”½
- å¯èƒ½å‡ å¤©åæ‰å‡ºç°
- æ’æŸ¥æˆæœ¬é«˜
```

---

## äºŒã€å†…å­˜æ³„æ¼çš„å¸¸è§åŸå› 

### 2.1 é™æ€é›†åˆæŒæœ‰å¯¹è±¡

#### ä¸ºä»€ä¹ˆä¼šæ³„æ¼ï¼Ÿ

```
é—®é¢˜ï¼š
1. é™æ€å˜é‡ç”Ÿå‘½å‘¨æœŸ = JVMç”Ÿå‘½å‘¨æœŸ
2. é™æ€é›†åˆæŒæœ‰å¯¹è±¡
3. å¯¹è±¡æ— æ³•è¢«GC
4. å†…å­˜æ³„æ¼

æµç¨‹ï¼š
åˆ›å»ºå¯¹è±¡ â†’ æ·»åŠ åˆ°é™æ€é›†åˆ â†’ å¯¹è±¡ä¸å†ä½¿ç”¨ â†’ ä»è¢«é›†åˆå¼•ç”¨ â†’ æ— æ³•GC â†’ æ³„æ¼
```

#### é—®é¢˜ä»£ç 

```java
public class CacheManager {
    
    // é—®é¢˜ï¼šé™æ€é›†åˆæŒæœ‰å¯¹è±¡
    private static List<Object> cache = new ArrayList<>();
    
    public void addToCache(Object obj) {
        cache.add(obj);
        // é—®é¢˜ï¼šå¯¹è±¡æ°¸è¿œä¸ä¼šè¢«ç§»é™¤
    }
    
    public static void main(String[] args) {
        CacheManager manager = new CacheManager();
        
        // æŒç»­æ·»åŠ å¯¹è±¡
        for (int i = 0; i < 1000000; i++) {
            manager.addToCache(new byte[1024]);  // æ¯æ¬¡1KB
        }
        
        // ç»“æœï¼š
        // - cacheæŒæœ‰100ä¸‡ä¸ªå¯¹è±¡
        // - å ç”¨çº¦1GBå†…å­˜
        // - å¯¹è±¡æ— æ³•è¢«GC
        // - æœ€ç»ˆOOM
    }
}
```

#### å†…å­˜å¢é•¿è¶‹åŠ¿

```
å†…å­˜ä½¿ç”¨
  â†‘
  â”‚                                    â•±
  â”‚                                  â•±
  â”‚                                â•±
  â”‚                              â•±
  â”‚                            â•±
  â”‚                          â•±
  â”‚                        â•±
  â”‚                      â•±
  â”‚                    â•±
  â”‚                  â•±
  â”‚                â•±
  â”‚              â•±
  â”‚            â•±
  â”‚          â•±
  â”‚        â•±
  â”‚      â•±
  â”‚    â•±
  â”‚  â•±
  â”‚â•±
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ—¶é—´
  
ç‰¹å¾ï¼š
- å†…å­˜æŒç»­çº¿æ€§å¢é•¿
- Full GCåå†…å­˜ä¸ä¸‹é™
- æœ€ç»ˆOOM
```

#### è§£å†³æ–¹æ¡ˆ

```java
public class CacheManager {
    
    // æ–¹æ¡ˆ1ï¼šä½¿ç”¨WeakHashMap
    private static Map<Object, Object> cache = new WeakHashMap<>();
    
    // æ–¹æ¡ˆ2ï¼šä½¿ç”¨è½¯å¼•ç”¨
    private static Map<String, SoftReference<Object>> cache2 = new HashMap<>();
    
    public void addToCache2(String key, Object obj) {
        cache2.put(key, new SoftReference<>(obj));
    }
    
    // æ–¹æ¡ˆ3ï¼šè®¾ç½®ç¼“å­˜å¤§å°é™åˆ¶
    private static final int MAX_CACHE_SIZE = 10000;
    private static LinkedHashMap<String, Object> cache3 = new LinkedHashMap<String, Object>(16, 0.75f, true) {
        @Override
        protected boolean removeEldestEntry(Map.Entry<String, Object> eldest) {
            return size() > MAX_CACHE_SIZE;
        }
    };
    
    // æ–¹æ¡ˆ4ï¼šä½¿ç”¨Guava Cacheï¼ˆæ¨èï¼‰
    private static Cache<String, Object> cache4 = CacheBuilder.newBuilder()
        .maximumSize(10000)
        .expireAfterWrite(10, TimeUnit.MINUTES)
        .build();
    
    // æ–¹æ¡ˆ5ï¼šå®šæœŸæ¸…ç†
    private static List<Object> cache5 = new ArrayList<>();
    
    public void clearCache() {
        cache5.clear();
    }
    
    // å¯åŠ¨å®šæ—¶ä»»åŠ¡
    @PostConstruct
    public void init() {
        ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);
        executor.scheduleAtFixedRate(this::clearCache, 1, 1, TimeUnit.HOURS);
    }
}
```

### 2.2 ç›‘å¬å™¨æœªæ³¨é”€

#### ä¸ºä»€ä¹ˆä¼šæ³„æ¼ï¼Ÿ

```
é—®é¢˜ï¼š
1. æ³¨å†Œç›‘å¬å™¨
2. ç›‘å¬å™¨æŒæœ‰å¯¹è±¡å¼•ç”¨
3. å¯¹è±¡ä¸å†ä½¿ç”¨
4. å¿˜è®°æ³¨é”€ç›‘å¬å™¨
5. å¯¹è±¡ä»è¢«ç›‘å¬å™¨æŒæœ‰
6. æ— æ³•GC

æµç¨‹ï¼š
æ³¨å†Œç›‘å¬å™¨ â†’ ç›‘å¬å™¨æŒæœ‰å¯¹è±¡ â†’ å¯¹è±¡ä¸å†ä½¿ç”¨ â†’ æœªæ³¨é”€ç›‘å¬å™¨ â†’ å¯¹è±¡ä»è¢«å¼•ç”¨ â†’ æ³„æ¼
```

#### é—®é¢˜ä»£ç 

```java
public class EventBus {
    
    private static List<EventListener> listeners = new ArrayList<>();
    
    public static void register(EventListener listener) {
        listeners.add(listener);
    }
    
    public static void unregister(EventListener listener) {
        listeners.remove(listener);
    }
}

public class UserService {
    
    private EventListener listener;
    
    public UserService() {
        // æ³¨å†Œç›‘å¬å™¨
        listener = new EventListener() {
            @Override
            public void onEvent(Event event) {
                // å¤„ç†äº‹ä»¶
            }
        };
        EventBus.register(listener);
    }
    
    // é—®é¢˜ï¼šæ²¡æœ‰æ³¨é”€ç›‘å¬å™¨
    // UserServiceå¯¹è±¡é”€æ¯æ—¶ï¼Œlistenerä»è¢«EventBusæŒæœ‰
    // å¯¼è‡´UserServiceæ— æ³•è¢«GC
}
```

#### æ³„æ¼åˆ†æ

```
å¯¹è±¡å¼•ç”¨å…³ç³»ï¼š

EventBus (static)
    â†“
listeners (static List)
    â†“
EventListener (åŒ¿åå†…éƒ¨ç±»)
    â†“
UserService (å¤–éƒ¨ç±»å¼•ç”¨)
    â†“
å…¶ä»–å¯¹è±¡

ç»“æœï¼š
- UserServiceä¸å†ä½¿ç”¨
- ä½†ä»è¢«EventBusé—´æ¥æŒæœ‰
- æ— æ³•è¢«GC
- å†…å­˜æ³„æ¼
```

#### è§£å†³æ–¹æ¡ˆ

```java
public class UserService {
    
    private EventListener listener;
    
    public UserService() {
        listener = new EventListener() {
            @Override
            public void onEvent(Event event) {
                // å¤„ç†äº‹ä»¶
            }
        };
        EventBus.register(listener);
    }
    
    // æ–¹æ¡ˆ1ï¼šæ‰‹åŠ¨æ³¨é”€
    public void destroy() {
        EventBus.unregister(listener);
        listener = null;
    }
    
    // æ–¹æ¡ˆ2ï¼šä½¿ç”¨@PreDestroyï¼ˆSpringï¼‰
    @PreDestroy
    public void cleanup() {
        EventBus.unregister(listener);
    }
    
    // æ–¹æ¡ˆ3ï¼šä½¿ç”¨å¼±å¼•ç”¨
    public void registerWithWeakReference() {
        WeakReference<EventListener> weakListener = new WeakReference<>(listener);
        EventBus.register(weakListener.get());
    }
}
```

### 2.3 ThreadLocalæœªæ¸…ç†

#### ä¸ºä»€ä¹ˆä¼šæ³„æ¼ï¼Ÿ

```
é—®é¢˜ï¼š
1. ThreadLocalå­˜å‚¨çº¿ç¨‹ç§æœ‰æ•°æ®
2. æ•°æ®å­˜å‚¨åœ¨Threadçš„ThreadLocalMapä¸­
3. çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä¸é”€æ¯
4. ThreadLocalæœªæ¸…ç†
5. æ•°æ®ä¸€ç›´å­˜åœ¨
6. å†…å­˜æ³„æ¼

ThreadLocalå†…éƒ¨ç»“æ„ï¼š
Thread
    â†“
ThreadLocalMap
    â†“
Entry[] (å¼±å¼•ç”¨ThreadLocalï¼Œå¼ºå¼•ç”¨value)
    â†“
value (å¼ºå¼•ç”¨)

é—®é¢˜ï¼š
- ThreadLocalè¢«å›æ”¶ï¼ˆå¼±å¼•ç”¨ï¼‰
- ä½†valueä»è¢«å¼ºå¼•ç”¨
- çº¿ç¨‹ä¸é”€æ¯ï¼Œvalueæ— æ³•å›æ”¶
- å†…å­˜æ³„æ¼
```

#### é—®é¢˜ä»£ç 

```java
public class UserContext {
    
    private static ThreadLocal<User> userThreadLocal = new ThreadLocal<>();
    
    public static void setUser(User user) {
        userThreadLocal.set(user);
        // é—®é¢˜ï¼šæ²¡æœ‰è°ƒç”¨remove
    }
    
    public static User getUser() {
        return userThreadLocal.get();
    }
}

// åœ¨çº¿ç¨‹æ± ä¸­ä½¿ç”¨
public class UserService {
    
    private ExecutorService executor = Executors.newFixedThreadPool(10);
    
    public void processUser(User user) {
        executor.submit(() -> {
            // è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
            UserContext.setUser(user);
            
            try {
                // ä¸šåŠ¡å¤„ç†
                doSomething();
            } finally {
                // é—®é¢˜ï¼šå¿˜è®°æ¸…ç†ThreadLocal
                // UserContext.remove();
            }
        });
    }
    
    // ç»“æœï¼š
    // - çº¿ç¨‹æ± ä¸­çš„10ä¸ªçº¿ç¨‹
    // - æ¯ä¸ªçº¿ç¨‹éƒ½æŒæœ‰Userå¯¹è±¡
    // - Userå¯¹è±¡æ— æ³•è¢«GC
    // - å†…å­˜æ³„æ¼
}
```

#### æ³„æ¼åœºæ™¯

```
åœºæ™¯1ï¼šWebåº”ç”¨
- Tomcatçº¿ç¨‹æ± 
- è¯·æ±‚å¤„ç†å®Œæˆ
- çº¿ç¨‹è¿”å›çº¿ç¨‹æ± 
- ThreadLocalæœªæ¸…ç†
- ä¸‹æ¬¡è¯·æ±‚å¯èƒ½è¯»åˆ°è„æ•°æ®

åœºæ™¯2ï¼šå¼‚æ­¥ä»»åŠ¡
- çº¿ç¨‹æ± æ‰§è¡Œä»»åŠ¡
- ä»»åŠ¡å®Œæˆ
- çº¿ç¨‹è¿”å›çº¿ç¨‹æ± 
- ThreadLocalæœªæ¸…ç†
- å†…å­˜æ³„æ¼
```

#### è§£å†³æ–¹æ¡ˆ

```java
public class UserContext {
    
    private static ThreadLocal<User> userThreadLocal = new ThreadLocal<>();
    
    public static void setUser(User user) {
        userThreadLocal.set(user);
    }
    
    public static User getUser() {
        return userThreadLocal.get();
    }
    
    // æ–¹æ¡ˆ1ï¼šæ‰‹åŠ¨æ¸…ç†
    public static void remove() {
        userThreadLocal.remove();
    }
}

public class UserService {
    
    private ExecutorService executor = Executors.newFixedThreadPool(10);
    
    // æ–¹æ¡ˆ2ï¼šä½¿ç”¨try-finallyç¡®ä¿æ¸…ç†
    public void processUser(User user) {
        executor.submit(() -> {
            try {
                UserContext.setUser(user);
                doSomething();
            } finally {
                UserContext.remove();  // ç¡®ä¿æ¸…ç†
            }
        });
    }
    
    // æ–¹æ¡ˆ3ï¼šä½¿ç”¨è£…é¥°å™¨æ¨¡å¼
    public void processUserWithDecorator(User user) {
        executor.submit(new Runnable() {
            @Override
            public void run() {
                try {
                    UserContext.setUser(user);
                    doSomething();
                } finally {
                    UserContext.remove();
                }
            }
        });
    }
    
    // æ–¹æ¡ˆ4ï¼šä½¿ç”¨InheritableThreadLocalï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
    private static InheritableThreadLocal<User> inheritableThreadLocal = new InheritableThreadLocal<>();
}
```

### 2.4 èµ„æºæœªå…³é—­

#### ä¸ºä»€ä¹ˆä¼šæ³„æ¼ï¼Ÿ

```
é—®é¢˜ï¼š
1. æ‰“å¼€èµ„æºï¼ˆè¿æ¥ã€æµã€æ–‡ä»¶ï¼‰
2. èµ„æºå¯¹è±¡æŒæœ‰å†…å­˜
3. ä½¿ç”¨å®Œæˆåæœªå…³é—­
4. èµ„æºå¯¹è±¡æ— æ³•è¢«GC
5. å†…å­˜æ³„æ¼

å¸¸è§èµ„æºï¼š
- æ•°æ®åº“è¿æ¥
- æ–‡ä»¶æµ
- Socketè¿æ¥
- HTTPè¿æ¥
- ç¼“å­˜è¿æ¥
```

#### é—®é¢˜ä»£ç 

```java
public class DatabaseService {
    
    // é—®é¢˜ä»£ç 1ï¼šè¿æ¥æœªå…³é—­
    public List<User> queryUsers() throws SQLException {
        Connection conn = DriverManager.getConnection(url, user, password);
        Statement stmt = conn.createStatement();
        ResultSet rs = stmt.executeQuery("SELECT * FROM users");
        
        List<User> users = new ArrayList<>();
        while (rs.next()) {
            users.add(new User(rs.getString("name")));
        }
        
        // é—®é¢˜ï¼šå¿˜è®°å…³é—­è¿æ¥
        // rs.close();
        // stmt.close();
        // conn.close();
        
        return users;
    }
    
    // é—®é¢˜ä»£ç 2ï¼šæµæœªå…³é—­
    public String readFile(String path) throws IOException {
        FileInputStream fis = new FileInputStream(path);
        BufferedReader reader = new BufferedReader(new InputStreamReader(fis));
        
        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null) {
            sb.append(line);
        }
        
        // é—®é¢˜ï¼šå¿˜è®°å…³é—­æµ
        // reader.close();
        // fis.close();
        
        return sb.toString();
    }
}
```

#### æ³„æ¼å½±å“

```
å½±å“1ï¼šè¿æ¥æ± è€—å°½
- è¿æ¥æœªå½’è¿˜
- è¿æ¥æ± æ— å¯ç”¨è¿æ¥
- æ–°è¯·æ±‚é˜»å¡

å½±å“2ï¼šæ–‡ä»¶å¥æŸ„è€—å°½
- æ–‡ä»¶æœªå…³é—­
- æ–‡ä»¶å¥æŸ„æ³„æ¼
- æ— æ³•æ‰“å¼€æ–°æ–‡ä»¶

å½±å“3ï¼šå†…å­˜æ³„æ¼
- èµ„æºå¯¹è±¡å ç”¨å†…å­˜
- æ— æ³•è¢«GC
- å†…å­˜æŒç»­å¢é•¿
```

#### è§£å†³æ–¹æ¡ˆ

```java
public class DatabaseService {
    
    // æ–¹æ¡ˆ1ï¼štry-finallyæ‰‹åŠ¨å…³é—­
    public List<User> queryUsersWithFinally() throws SQLException {
        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;
        
        try {
            conn = DriverManager.getConnection(url, user, password);
            stmt = conn.createStatement();
            rs = stmt.executeQuery("SELECT * FROM users");
            
            List<User> users = new ArrayList<>();
            while (rs.next()) {
                users.add(new User(rs.getString("name")));
            }
            return users;
        } finally {
            // ç¡®ä¿å…³é—­èµ„æº
            if (rs != null) {
                try {
                    rs.close();
                } catch (SQLException e) {
                    // è®°å½•æ—¥å¿—
                }
            }
            if (stmt != null) {
                try {
                    stmt.close();
                } catch (SQLException e) {
                    // è®°å½•æ—¥å¿—
                }
            }
            if (conn != null) {
                try {
                    conn.close();
                } catch (SQLException e) {
                    // è®°å½•æ—¥å¿—
                }
            }
        }
    }
    
    // æ–¹æ¡ˆ2ï¼štry-with-resourcesï¼ˆæ¨èï¼‰
    public List<User> queryUsersWithTryWithResources() throws SQLException {
        try (Connection conn = DriverManager.getConnection(url, user, password);
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery("SELECT * FROM users")) {
            
            List<User> users = new ArrayList<>();
            while (rs.next()) {
                users.add(new User(rs.getString("name")));
            }
            return users;
        }
        // è‡ªåŠ¨å…³é—­èµ„æº
    }
    
    // æ–¹æ¡ˆ3ï¼šä½¿ç”¨è¿æ¥æ± 
    private DataSource dataSource;
    
    public List<User> queryUsersWithPool() throws SQLException {
        try (Connection conn = dataSource.getConnection();
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery("SELECT * FROM users")) {
            
            List<User> users = new ArrayList<>();
            while (rs.next()) {
                users.add(new User(rs.getString("name")));
            }
            return users;
        }
    }
}
```

### 2.5 å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨

#### ä¸ºä»€ä¹ˆä¼šæ³„æ¼ï¼Ÿ

```
é—®é¢˜ï¼š
1. éé™æ€å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨
2. å†…éƒ¨ç±»å¯¹è±¡ç”Ÿå‘½å‘¨æœŸé•¿
3. å¤–éƒ¨ç±»å¯¹è±¡æ— æ³•è¢«GC
4. å†…å­˜æ³„æ¼

å¼•ç”¨å…³ç³»ï¼š
å¤–éƒ¨ç±»
    â†“
å†…éƒ¨ç±»ï¼ˆéšå¼æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨ï¼‰
    â†“
å¦‚æœå†…éƒ¨ç±»è¢«é•¿æœŸæŒæœ‰
    â†“
å¤–éƒ¨ç±»ä¹Ÿè¢«é•¿æœŸæŒæœ‰
    â†“
å¤–éƒ¨ç±»æ— æ³•è¢«GC
```

#### é—®é¢˜ä»£ç 

```java
public class OuterClass {
    
    private byte[] data = new byte[1024 * 1024];  // 1MB
    
    // é—®é¢˜ï¼šéé™æ€å†…éƒ¨ç±»
    public class InnerClass {
        public void doSomething() {
            // å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜
            System.out.println(data.length);
        }
    }
    
    public InnerClass getInner() {
        return new InnerClass();
    }
}

public class LeakDemo {
    
    private static List<Object> cache = new ArrayList<>();
    
    public static void main(String[] args) {
        for (int i = 0; i < 1000; i++) {
            OuterClass outer = new OuterClass();
            OuterClass.InnerClass inner = outer.getInner();
            
            // é—®é¢˜ï¼šåªç¼“å­˜å†…éƒ¨ç±»å¯¹è±¡
            cache.add(inner);
            
            // ä½†å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨
            // å¯¼è‡´å¤–éƒ¨ç±»ä¹Ÿæ— æ³•è¢«GC
            // 1000ä¸ªå¤–éƒ¨ç±» Ã— 1MB = 1GBå†…å­˜æ³„æ¼
        }
    }
}
```

#### å­—èŠ‚ç åˆ†æ

```java
// ç¼–è¯‘åçš„å†…éƒ¨ç±»
public class OuterClass$InnerClass {
    
    // éšå¼æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨
    final OuterClass this$0;
    
    public OuterClass$InnerClass(OuterClass outer) {
        this.this$0 = outer;
    }
    
    public void doSomething() {
        // è®¿é—®å¤–éƒ¨ç±»æˆå‘˜
        System.out.println(this$0.data.length);
    }
}
```

#### è§£å†³æ–¹æ¡ˆ

```java
public class OuterClass {
    
    private byte[] data = new byte[1024 * 1024];
    
    // æ–¹æ¡ˆ1ï¼šä½¿ç”¨é™æ€å†…éƒ¨ç±»
    public static class StaticInnerClass {
        public void doSomething() {
            // æ— æ³•ç›´æ¥è®¿é—®å¤–éƒ¨ç±»æˆå‘˜
            // ä¸æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨
        }
    }
    
    // æ–¹æ¡ˆ2ï¼šä½¿ç”¨å±€éƒ¨ç±»
    public Object createInner() {
        class LocalInner {
            public void doSomething() {
                // å±€éƒ¨ç±»
            }
        }
        return new LocalInner();
    }
    
    // æ–¹æ¡ˆ3ï¼šä½¿ç”¨åŒ¿åç±»æ—¶æ³¨æ„
    public Runnable createRunnable() {
        // é—®é¢˜ï¼šåŒ¿åç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨
        return new Runnable() {
            @Override
            public void run() {
                // å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æˆå‘˜
                System.out.println(data.length);
            }
        };
    }
    
    // æ–¹æ¡ˆ4ï¼šä½¿ç”¨Lambdaï¼ˆä¸æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨ï¼‰
    public Runnable createRunnableWithLambda() {
        return () -> {
            // Lambdaä¸æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨
            // é™¤éæ˜¾å¼ä½¿ç”¨å¤–éƒ¨ç±»æˆå‘˜
        };
    }
}
```

### 2.6 HashMapçš„Keyæœªé‡å†™hashCodeå’Œequals

#### ä¸ºä»€ä¹ˆä¼šæ³„æ¼ï¼Ÿ

```
é—®é¢˜ï¼š
1. ä½¿ç”¨å¯¹è±¡ä½œä¸ºHashMapçš„Key
2. å¯¹è±¡æœªé‡å†™hashCodeå’Œequals
3. å¯¹è±¡å†…å®¹ç›¸åŒä½†å®ä¾‹ä¸åŒ
4. HashMapä¸­å­˜åœ¨é‡å¤çš„Key
5. æ—§çš„Keyæ— æ³•è¢«ç§»é™¤
6. å†…å­˜æ³„æ¼

ç¤ºä¾‹ï¼š
map.put(new Key("a"), value1);
map.put(new Key("a"), value2);

ç»“æœï¼š
- ä¸¤ä¸ªKeyå¯¹è±¡ä¸åŒ
- HashMapä¸­æœ‰ä¸¤ä¸ªentry
- æ—§çš„entryæ— æ³•è¢«ç§»é™¤
```

#### é—®é¢˜ä»£ç 

```java
public class Key {
    private String name;
    
    public Key(String name) {
        this.name = name;
    }
    
    // é—®é¢˜ï¼šæœªé‡å†™hashCodeå’Œequals
}

public class HashMapLeakDemo {
    
    private static Map<Key, String> map = new HashMap<>();
    
    public static void main(String[] args) {
        // æ·»åŠ æ•°æ®
        for (int i = 0; i < 1000000; i++) {
            Key key = new Key("key" + (i % 100));
            map.put(key, "value" + i);
        }
        
        // é—®é¢˜ï¼š
        // - å®é™…åªæœ‰100ä¸ªä¸åŒçš„key
        // - ä½†mapä¸­æœ‰100ä¸‡ä¸ªentry
        // - å› ä¸ºKeyå¯¹è±¡ä¸åŒï¼ˆå³ä½¿nameç›¸åŒï¼‰
        // - æ—§çš„entryæ— æ³•è¢«ç§»é™¤
        // - å†…å­˜æ³„æ¼
        
        System.out.println("Map size: " + map.size());  // 1000000
    }
}
```

#### è§£å†³æ–¹æ¡ˆ

```java
public class Key {
    private String name;
    
    public Key(String name) {
        this.name = name;
    }
    
    // æ–¹æ¡ˆ1ï¼šé‡å†™hashCodeå’Œequals
    @Override
    public int hashCode() {
        return name != null ? name.hashCode() : 0;
    }
    
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;
        Key key = (Key) obj;
        return Objects.equals(name, key.name);
    }
}

public class HashMapLeakDemo {
    
    private static Map<Key, String> map = new HashMap<>();
    
    public static void main(String[] args) {
        // æ·»åŠ æ•°æ®
        for (int i = 0; i < 1000000; i++) {
            Key key = new Key("key" + (i % 100));
            map.put(key, "value" + i);
        }
        
        // ç»“æœï¼š
        // - mapä¸­åªæœ‰100ä¸ªentry
        // - ç›¸åŒçš„keyä¼šè¦†ç›–æ—§å€¼
        // - æ²¡æœ‰å†…å­˜æ³„æ¼
        
        System.out.println("Map size: " + map.size());  // 100
    }
    
    // æ–¹æ¡ˆ2ï¼šä½¿ç”¨Stringä½œä¸ºKey
    private static Map<String, String> map2 = new HashMap<>();
    
    public static void demo2() {
        for (int i = 0; i < 1000000; i++) {
            String key = "key" + (i % 100);
            map2.put(key, "value" + i);
        }
        System.out.println("Map size: " + map2.size());  // 100
    }
}
```

---

## ä¸‰ã€å†…å­˜æ³„æ¼æ’æŸ¥æµç¨‹

### 3.1 æ’æŸ¥æµç¨‹å›¾

```
å‘ç°å†…å­˜é—®é¢˜
    â†“
1. ç¡®è®¤æ˜¯å¦å†…å­˜æ³„æ¼
   - è§‚å¯Ÿå†…å­˜è¶‹åŠ¿
   - Full GCåå†…å­˜æ˜¯å¦ä¸‹é™
    â†“
2. ç”Ÿæˆå †è½¬å‚¨
   - jmap -dump
   - æˆ–OOMæ—¶è‡ªåŠ¨ç”Ÿæˆ
    â†“
3. åˆ†æå †è½¬å‚¨
   - ä½¿ç”¨MAT/JProfiler
   - æ‰¾åˆ°å ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡
    â†“
4. åˆ†æå¼•ç”¨é“¾
   - æŸ¥çœ‹GC Roots
   - æ‰¾åˆ°æ³„æ¼è·¯å¾„
    â†“
5. å®šä½ä»£ç 
   - æ ¹æ®å¼•ç”¨é“¾å®šä½ä»£ç 
   - åˆ†ææ³„æ¼åŸå› 
    â†“
6. ä¿®å¤é—®é¢˜
   - ä¿®æ”¹ä»£ç 
   - éªŒè¯æ•ˆæœ
```

### 3.2 åˆ¤æ–­æ˜¯å¦å†…å­˜æ³„æ¼

#### æ–¹æ³•1ï¼šè§‚å¯Ÿå†…å­˜è¶‹åŠ¿

```bash
# æŒç»­ç›‘æ§å †å†…å­˜ä½¿ç”¨
jstat -gcutil <pid> 1000

# è¾“å‡ºç¤ºä¾‹
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT
  0.00  95.00  50.00  60.00  90.00  85.00  100    1.000    5    2.500    3.500
  0.00  95.00  55.00  62.00  90.00  85.00  101    1.010    5    2.500    3.510
  0.00  95.00  60.00  64.00  90.00  85.00  102    1.020    5    2.500    3.520
  0.00  95.00  65.00  66.00  90.00  85.00  103    1.030    5    2.500    3.530
  0.00  95.00  70.00  68.00  90.00  85.00  104    1.040    6    3.000    4.040

# åˆ†æï¼š
# - Oï¼ˆè€å¹´ä»£ï¼‰æŒç»­å¢é•¿ï¼š60% â†’ 68%
# - Full GCåå†…å­˜ä¸ä¸‹é™
# - å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼
```

#### æ–¹æ³•2ï¼šå¯¹æ¯”Full GCå‰å

```bash
# Full GCå‰
jmap -heap <pid>

# æ‰‹åŠ¨è§¦å‘Full GC
jmap -histo:live <pid>

# Full GCå
jmap -heap <pid>

# å¯¹æ¯”ï¼š
# å¦‚æœFull GCåè€å¹´ä»£ä½¿ç”¨ç‡ä»ç„¶å¾ˆé«˜
# ä¸”æŒç»­å¢é•¿
# åˆ™å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼
```

#### æ–¹æ³•3ï¼šç”Ÿæˆå¤šæ¬¡å †è½¬å‚¨å¯¹æ¯”

```bash
# ç”Ÿæˆç¬¬ä¸€æ¬¡å †è½¬å‚¨
jmap -dump:format=b,file=heap1.hprof <pid>

# ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆå¦‚1å°æ—¶ï¼‰

# ç”Ÿæˆç¬¬äºŒæ¬¡å †è½¬å‚¨
jmap -dump:format=b,file=heap2.hprof <pid>

# ä½¿ç”¨MATå¯¹æ¯”ä¸¤æ¬¡å †è½¬å‚¨
# æŸ¥çœ‹å“ªäº›å¯¹è±¡æ•°é‡æŒç»­å¢é•¿
```

### 3.3 ç”Ÿæˆå †è½¬å‚¨

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨jmap
jmap -dump:format=b,file=heap.hprof <pid>

# æ–¹æ³•2ï¼šä½¿ç”¨jcmd
jcmd <pid> GC.heap_dump heap.hprof

# æ–¹æ³•3ï¼šOOMæ—¶è‡ªåŠ¨ç”Ÿæˆï¼ˆæ¨èï¼‰
java -XX:+HeapDumpOnOutOfMemoryError \
     -XX:HeapDumpPath=/path/to/dumps \
     -jar app.jar

# æ–¹æ³•4ï¼šä½¿ç”¨JMX
# é€šè¿‡JConsoleæˆ–VisualVMç”Ÿæˆ
```

### 3.4 ä½¿ç”¨MATåˆ†æå †è½¬å‚¨

#### æ­¥éª¤1ï¼šæ‰“å¼€å †è½¬å‚¨æ–‡ä»¶

```
File â†’ Open Heap Dump â†’ é€‰æ‹©heap.hprof
```

#### æ­¥éª¤2ï¼šæŸ¥çœ‹Leak Suspects

```
MATä¼šè‡ªåŠ¨åˆ†æå¯ç–‘çš„å†…å­˜æ³„æ¼
æ˜¾ç¤ºï¼š
- å ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡
- å¯èƒ½çš„æ³„æ¼è·¯å¾„
- å»ºè®®
```

#### æ­¥éª¤3ï¼šæŸ¥çœ‹Dominator Tree

```
Dominator Treeæ˜¾ç¤ºï¼š
- å¯¹è±¡åŠå…¶ä¿ç•™çš„å†…å­˜
- æŒ‰å†…å­˜å¤§å°æ’åº
- æ‰¾åˆ°å ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡
```

#### æ­¥éª¤4ï¼šæŸ¥çœ‹GC Rootsè·¯å¾„

```
å³é”®å¯¹è±¡ â†’ Path to GC Roots â†’ exclude weak references

æ˜¾ç¤ºï¼š
- ä»GC Rootsåˆ°å¯¹è±¡çš„å¼•ç”¨é“¾
- æ‰¾åˆ°ä¸ºä»€ä¹ˆå¯¹è±¡æ— æ³•è¢«GC
```

#### æ­¥éª¤5ï¼šåˆ†æå¼•ç”¨é“¾

```
ç¤ºä¾‹å¼•ç”¨é“¾ï¼š
Thread "main"
    â†“
CacheManager (static field)
    â†“
cache (ArrayList)
    â†“
User[] (array)
    â†“
User (object)

åˆ†æï¼š
- Userå¯¹è±¡è¢«é™æ€é›†åˆcacheæŒæœ‰
- cacheæ˜¯CacheManagerçš„é™æ€å­—æ®µ
- å¯¼è‡´Useræ— æ³•è¢«GC
- å†…å­˜æ³„æ¼
```

---

## å››ã€å†…å­˜æ³„æ¼æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹1ï¼šç”Ÿäº§ç¯å¢ƒå†…å­˜æ³„æ¼æ’æŸ¥

#### é—®é¢˜ç°è±¡

```
ç°è±¡ï¼š
- åº”ç”¨è¿è¡Œ3å¤©åOOM
- é‡å¯åæ­£å¸¸ï¼Œ3å¤©åå†æ¬¡OOM
- Full GCé¢‘ç¹ï¼Œæ¯æ¬¡è€—æ—¶5ç§’+
- ç”¨æˆ·æŠ•è¯‰ç³»ç»Ÿå¡é¡¿
```

#### æ’æŸ¥è¿‡ç¨‹

```
æ­¥éª¤1ï¼šè§‚å¯Ÿå†…å­˜è¶‹åŠ¿
jstat -gcutil <pid> 1000

å‘ç°ï¼š
- è€å¹´ä»£ä½¿ç”¨ç‡æŒç»­å¢é•¿
- Full GCåå†…å­˜ä¸ä¸‹é™
- ç¡®è®¤å†…å­˜æ³„æ¼

æ­¥éª¤2ï¼šç”Ÿæˆå †è½¬å‚¨
jmap -dump:format=b,file=heap.hprof <pid>

æ­¥éª¤3ï¼šä½¿ç”¨MATåˆ†æ
æ‰“å¼€heap.hprof

Leak Suspectsæ˜¾ç¤ºï¼š
- ConcurrentHashMapå ç”¨2GB
- åŒ…å«500ä¸‡ä¸ªentry
- è¢«é™æ€å­—æ®µæŒæœ‰

æ­¥éª¤4ï¼šæŸ¥çœ‹å¼•ç”¨é“¾
Thread "main"
    â†“
UserSessionManager (static)
    â†“
sessionMap (ConcurrentHashMap)
    â†“
UserSession[] (500ä¸‡ä¸ª)

æ­¥éª¤5ï¼šåˆ†æä»£ç 
public class UserSessionManager {
    private static ConcurrentHashMap<String, UserSession> sessionMap = new ConcurrentHashMap<>();
    
    public static void addSession(String sessionId, UserSession session) {
        sessionMap.put(sessionId, session);
        // é—®é¢˜ï¼šsessionæ°¸ä¸è¿‡æœŸï¼Œæ°¸ä¸åˆ é™¤
    }
}
```

#### è§£å†³æ–¹æ¡ˆ

```java
public class UserSessionManager {
    
    // æ–¹æ¡ˆ1ï¼šä½¿ç”¨Guava Cacheï¼ˆæ¨èï¼‰
    private static Cache<String, UserSession> sessionCache = CacheBuilder.newBuilder()
        .maximumSize(100000)  // æœ€å¤§10ä¸‡ä¸ªsession
        .expireAfterWrite(30, TimeUnit.MINUTES)  // 30åˆ†é’Ÿè¿‡æœŸ
        .build();
    
    public static void addSession(String sessionId, UserSession session) {
        sessionCache.put(sessionId, session);
    }
    
    // æ–¹æ¡ˆ2ï¼šå®šæœŸæ¸…ç†
    private static ConcurrentHashMap<String, UserSession> sessionMap = new ConcurrentHashMap<>();
    
    @Scheduled(fixedRate = 60000)  // æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
    public void cleanExpiredSessions() {
        long now = System.currentTimeMillis();
        sessionMap.entrySet().removeIf(entry -> 
            now - entry.getValue().getCreateTime() > 30 * 60 * 1000
        );
    }
}
```

#### æ•ˆæœéªŒè¯

```
ä¼˜åŒ–åï¼š
- å†…å­˜ä½¿ç”¨ç¨³å®šåœ¨2GB
- Full GCé¢‘ç‡ï¼š1æ¬¡/å°æ—¶
- Full GCæ—¶é—´ï¼š< 500ms
- åº”ç”¨ç¨³å®šè¿è¡Œ30å¤©+
```

---

## äº”ã€é¢„é˜²å†…å­˜æ³„æ¼

### 5.1 ç¼–ç è§„èŒƒ

```java
/**
 * å†…å­˜æ³„æ¼é¢„é˜²æœ€ä½³å®è·µ
 */
public class MemoryLeakPrevention {
    
    // 1. é¿å…ä½¿ç”¨é™æ€é›†åˆ
    // ä¸å¥½
    private static List<Object> cache = new ArrayList<>();
    
    // å¥½ï¼šä½¿ç”¨æœ‰ç•Œç¼“å­˜
    private static Cache<String, Object> cache2 = CacheBuilder.newBuilder()
        .maximumSize(10000)
        .build();
    
    // 2. åŠæ—¶æ³¨é”€ç›‘å¬å™¨
    public void registerListener() {
        EventBus.register(listener);
    }
    
    @PreDestroy
    public void cleanup() {
        EventBus.unregister(listener);
    }
    
    // 3. ThreadLocalå¿…é¡»æ¸…ç†
    public void processRequest() {
        try {
            threadLocal.set(value);
            doSomething();
        } finally {
            threadLocal.remove();  // å¿…é¡»æ¸…ç†
        }
    }
    
    // 4. èµ„æºå¿…é¡»å…³é—­
    public void readFile() throws IOException {
        try (FileInputStream fis = new FileInputStream("file.txt")) {
            // ä½¿ç”¨èµ„æº
        }  // è‡ªåŠ¨å…³é—­
    }
    
    // 5. ä½¿ç”¨é™æ€å†…éƒ¨ç±»
    public static class StaticInner {
        // ä¸æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨
    }
    
    // 6. HashMapçš„Keyé‡å†™hashCodeå’Œequals
    public static class Key {
        private String name;
        
        @Override
        public int hashCode() {
            return name.hashCode();
        }
        
        @Override
        public boolean equals(Object obj) {
            if (this == obj) return true;
            if (!(obj instanceof Key)) return false;
            return Objects.equals(name, ((Key) obj).name);
        }
    }
}
```

### 5.2 Code Reviewæ£€æŸ¥æ¸…å•

```
â–¡ é™æ€é›†åˆ
  â–¡ æ˜¯å¦æœ‰å¤§å°é™åˆ¶
  â–¡ æ˜¯å¦æœ‰è¿‡æœŸæœºåˆ¶
  â–¡ æ˜¯å¦å®šæœŸæ¸…ç†

â–¡ ç›‘å¬å™¨
  â–¡ æ³¨å†Œåæ˜¯å¦æ³¨é”€
  â–¡ æ˜¯å¦ä½¿ç”¨å¼±å¼•ç”¨

â–¡ ThreadLocal
  â–¡ ä½¿ç”¨åæ˜¯å¦remove
  â–¡ æ˜¯å¦åœ¨finallyä¸­æ¸…ç†

â–¡ èµ„æº
  â–¡ æ˜¯å¦ä½¿ç”¨try-with-resources
  â–¡ æ˜¯å¦åœ¨finallyä¸­å…³é—­

â–¡ å†…éƒ¨ç±»
  â–¡ æ˜¯å¦åº”è¯¥ä½¿ç”¨é™æ€å†…éƒ¨ç±»
  â–¡ åŒ¿åç±»æ˜¯å¦æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨

â–¡ HashMap
  â–¡ Keyæ˜¯å¦é‡å†™hashCodeå’Œequals
  â–¡ æ˜¯å¦å¯èƒ½æœ‰é‡å¤Key
```

### 5.3 å·¥å…·æ£€æµ‹

```
1. FindBugs/SpotBugs
   - é™æ€ä»£ç åˆ†æ
   - æ£€æµ‹æ½œåœ¨å†…å­˜æ³„æ¼

2. SonarQube
   - ä»£ç è´¨é‡åˆ†æ
   - å†…å­˜æ³„æ¼è§„åˆ™æ£€æŸ¥

3. JProfiler
   - è¿è¡Œæ—¶å†…å­˜åˆ†æ
   - æ£€æµ‹å†…å­˜æ³„æ¼

4. VisualVM
   - å †å†…å­˜åˆ†æ
   - å¯¹è±¡å¼•ç”¨åˆ†æ
```

---

## å…­ã€æ€»ç»“

### 6.1 å¸¸è§åŸå› 

```
1. é™æ€é›†åˆæŒæœ‰å¯¹è±¡
2. ç›‘å¬å™¨æœªæ³¨é”€
3. ThreadLocalæœªæ¸…ç†
4. èµ„æºæœªå…³é—­
5. å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨
6. HashMapçš„Keyæœªé‡å†™hashCodeå’Œequals
```

### 6.2 æ’æŸ¥æ­¥éª¤

```
1. ç¡®è®¤å†…å­˜æ³„æ¼ï¼ˆè§‚å¯Ÿå†…å­˜è¶‹åŠ¿ï¼‰
2. ç”Ÿæˆå †è½¬å‚¨ï¼ˆjmap -dumpï¼‰
3. åˆ†æå †è½¬å‚¨ï¼ˆMATï¼‰
4. æŸ¥çœ‹å¼•ç”¨é“¾ï¼ˆPath to GC Rootsï¼‰
5. å®šä½ä»£ç 
6. ä¿®å¤é—®é¢˜
7. éªŒè¯æ•ˆæœ
```

### 6.3 é¢„é˜²æªæ–½

```
1. éµå¾ªç¼–ç è§„èŒƒ
2. Code Review
3. ä½¿ç”¨é™æ€ä»£ç åˆ†æå·¥å…·
4. å®šæœŸè¿›è¡Œå†…å­˜åˆ†æ
5. ç›‘æ§å†…å­˜ä½¿ç”¨è¶‹åŠ¿
```

---

**ä¸‹ä¸€ç¯‡**ï¼š[æ­»é”é—®é¢˜æ’æŸ¥](./05_æ­»é”é—®é¢˜æ’æŸ¥.md)
